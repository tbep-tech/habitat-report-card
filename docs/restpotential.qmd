---
title: "Restoration Potential in the Tampa Bay Watershed"
author: 
  - name: Dr. Marcus Beck, <mbeck@tbep.org>
institute: "Tampa Bay Estuary Program"
date: "`r Sys.Date()`"
format:
  html:
    theme: cosmo
    code-tools: 
      source: https://github.com/tbep-tech/habitat-report-card/blob/master/docs/restpotential.qmd
    css: styles.css

execute:
  echo: false
  warning: false
filters:
  - lightbox

lightbox: auto
---

```{r}
#| include: false
library(leaflet)
library(here)
library(sf)

restmap <- st_read(here('data/restmap.shp'))

cols <- list(
  `Coastal Uplands` = 'brown4', 
  `Freshwater Wetlands` = 'orange', 
  `Native Uplands` = 'darkgreen', 
  `Tidal Wetlands` = 'yellow'
  ) |> 
  unlist()
```

The map shows restoration potential for restorable habitats in the Tampa Bay Watershed.  Restorable lands are altered but non-hardened areas where restoration could support native habitats (e.g., fallow farm fields).  These lands are also currently acquired or protected by public agencies.  Restoration potential depends on soil type, soil salinity, and proximity to the coast.  

```{r}
pal <- colorFactor(palette = cols, domain = names(cols))

restmap |> 
  st_transform(crs = 4326) |> 
  leaflet() |> 
  addProviderTiles("CartoDB.Positron") |> 
  addPolygons(
    fillColor = ~pal(HMPU_TA),
    fillOpacity = 0.7,
    color = ~pal(HMPU_TA),
    weight = 0.5,
    popup = ~paste0(
      '<strong>Restoration Potential Type: </strong>', HMPU_TA
    )
  ) |> 
  addLegend(
    position = 'topright',
    pal = pal,
    opacity = 0.7,
    values = restmap$HMPU_TA,
    title = 'Restoration Potential Type'
  )
```
